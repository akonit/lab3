Лабораторная работа 3, вариант 16
=================================

Постановка задачи
-----------------

Реализовать веб-приложение с использованием следующих технологий: **Yii**, **mongodb** или couchdb.

Тема приложения: Сайт отзывов о товарах (аналог irecommend.ru)

- управление контентом (списком товаров и категориями товаров - CRUD) в админке
- поиск товара по его описанию
- отзывы, рейтинг для каждого товара
- у каждого товара может быть несколько категорий, которые можно прикрепить в админке

Деплой
------

Лабораторная выполнена с использованием фреймворка [Yii](http://yiiframework.ru/doc/guide/ru/quickstart.installation) и базы данных [mongodb].

1. Выгрузить проект из репозитория:

  ```shell
  git clone https://github.com/akonit/lab3.git
  ```
2. Поместить выгруженную директорию lab3 в корневую папку веб-сервера, поднятого на компьютере (приложение тестировалось на Apache: веб-директория /var/www, само приложение размещено по пути /var/www/lab3).
3. При использовании линукса нужно добавить прав для выгруженной директории:

  ```shell
  sudo chmod -R 777 lab2
  sudo chown www-data -R lab2
  ```
4. Накатить базу данных: в директории lab3 выполнить следующую команду:

  ```shell
  mongo < protected/data/schema.update
  ```
5. Для доступа к главной странице приложения необходимо в браузере перейти по адресу `http://localhost/lab2/index.php`. Пользовательский доступ к приложению - demo/demo, админский - admin/admin.


В случае возникновения проблем при запуске приложения
-----------------------------------------------------

1. Удостовериться, что на компьютере установлен драйвер для работы с `mongo` из-под `php` - [*MongoDB PHP driver*](http://www.php.net/manual/ru/mongo.installation.php).
2. Добавить в `php.ini` файл следующую строку:

  `extension=mongo.so`
3. Проверить, что пункт **2** был выполнен именно для `php.ini`, используемого сервером. Сделать это можно, раскомментировав в самом начале файла `protected/config/main.php` строку:

  `phpinfo();`
  В результате, при следующем включении приложения на главной странице отобразятся данные по конфигурации сервера, на котором поднимается приложение. Пункт **2** нужно выполнять для `php.ini`, указанного в этих настройках.
4. Проверить, что драйвер успешно установлен:

  `php -m`
  В выводе этой команды нужно найти строку `mongo` - ее наличие означает, что драйвер успешно установлен.
4. Перезапустить сервер, на котором хостится приложение.

Важные моменты в работе с приложением
-------------------------------------

1. Проставление оценки товару осуществляется на странице товара.
2. Функция написания отзыва о продукте доступна в правой части экрана вместе с CRUD функциями.
3. Написание отзывов и проставление оценки доступно только для авторизированных пользователей (demo/demo).
4. Продукты и категории связаны через дополнительную таблицу в базе данных, отображемую и редактируемую на сайте во вкладке "Связь между продуктами и категориями".

Андеплой
--------

Откат базы данных выполняется при помощи следующей команды в директории lab3:

  ```shell
  mongo < protected/data/schema.rollback
  ```
